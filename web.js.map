{"version":3,"sources":["../../../../mam.jam.js","-","../../../../mam.ts","../../dom/context/my/lom/dom/context/context.ts","../../dom/context/my/lom/dom/context/context.web.ts","../../dom/render/my/lom/dom/render/render.ts","../../view/my/lom/view/view.ts","../../view/my/lom/view/view.web.ts","../../button/my/lom/button/button.ts","../../input/my/lom/input/input.ts","../../storage/my/lom/storage/storage.ts","../../theme/my/lom/theme/theme.ts"],"names":[],"mappings":"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","file":"web.js","sourcesContent":[null,null,"Error.stackTraceLimit = 50;\n\ndeclare let _$_: { new(): {} } & typeof globalThis\ndeclare class $ extends _$_ {}\n\nnamespace $ {\n\texport type $ = typeof $$\n\texport declare class $$ extends $ {}\n\tnamespace $$ {\n\t\texport type $$ = $\n\t}\n}\n\nmodule.exports = $\n","let $my_lom_dom_context: typeof globalThis\n","$my_lom_dom_context = self\n","function $my_lom_dom_render(\n\tnode : Element | DocumentFragment ,\n\tchildren: NodeList | Array< Node | string | null >\n) {\n\tconst node_set = new Set< Node | string | null >( children )\n\tlet next = node.firstChild\n\n\tfor (const view of children) {\n\t\tif (view === null) continue\n\n\t\tif (view instanceof Node) {\n\n\t\t\twhile(true) {\n\t\t\t\tif (!next) {\n\t\t\t\t\tnode.append(view)\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t\tif (next === view) {\n\t\t\t\t\tnext = next.nextSibling\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tif (node_set.has(next)) {\n\t\t\t\t\t\tnext.before(view)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst nn = next.nextSibling\n\t\t\t\t\t\tnext.remove()\n\t\t\t\t\t\tnext = nn\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif( next && next.nodeName === '#text' ) {\n\t\t\t\tconst str = String( view )\n\t\t\t\tif( next.nodeValue !== str ) next.nodeValue = str\n\t\t\t\tnext = next.nextSibling\n\t\t\t} else {\n\t\t\t\tconst text = $my_lom_dom_context.document.createTextNode( String( view ) )\n\t\t\t\tnode.insertBefore( text, next )\n\t\t\t}\n\n\t\t}\n\t}\n\n\twhile( next ) {\n\t\tconst curr = next \n\t\tnext = curr.nextSibling\n\t\tcurr.remove()\n\t}\n}\n","class $my_lom_view {\n\n\tstatic root: ()=> typeof $my_lom_view\n\tstatic mount() {\n\t\tconst node = $my_lom_dom_context.document.querySelector( '#root' )\n\t\tif ( !node ) return\n\n\t\tconst View = this.root()\n\t\tconst obj = new View\n\n\t\tnode.replaceWith( obj.dom_tree() )\n\t\tsetInterval( ()=> obj.dom_tree() , 100 )\n\t}\n\n\tdom_name() {\n\t\treturn 'div'\n\t}\n\n\tattr(): { [key: string]: string|number|boolean|null } {\n\t\treturn {}\n\t}\n\n\tevent(): { [key: string]: (e: Event) => any } {\n\t\treturn {}\n\t}\n\n\tfield(): { [key: string]: any } {\n\t\treturn {}\n\t}\n\t\n\tsub(): Array<$my_lom_view | Node | string | number | boolean> {\n        return []\n    }\n\n\t_dom_node = null as unknown as Element\n\tdom_node() {\n\t\tif ( this._dom_node ) return this._dom_node\n\n\t\tconst node = $my_lom_dom_context.document.createElement( this.dom_name() )\n\t\tObject.entries(this.event()).forEach( ([name , fn])=> node.addEventListener(name, fn) )\n\n\t\treturn this._dom_node = node\n\t}\n\n\tdom_node_actual() {\n\t\tconst node = this.dom_node()\n\n\t\tObject.entries(this.attr()).forEach( ([name, val])=> node.setAttribute(name, String(val)) )\n\t\tObject.entries(this.field()).forEach( ([name, val])=> node[name] = val )\n\n\t\tnode.setAttribute('view', this.constructor.name)\n\n\t\treturn node\n\t}\n\n\tdom_tree() {\n\t\tconst node = this.dom_node_actual()\n\n\t\tconst node_list = this.sub().map( node => {\n\t\t\tif ( node === null ) return null\n\t\t\treturn node instanceof $my_lom_view ? node.dom_tree() : String(node)\n\t\t} )\n\n\t\t$my_lom_dom_render( node, node_list )\n\n\t\treturn node\n\t}\n\n}\n","setTimeout( ()=> $my_lom_view.mount() )\n","class $my_lom_button extends $my_lom_view {\n\n\tdom_name() { return 'button' }\n\n\ttitle() { return '' }\n\n\tclick( e: Event ) {}\n\n\tsub() {\n\t\treturn [ this.title() ]\n\t}\n\n\tevent() {\n\t\treturn {\n\t\t\tclick: (e: Event) => this.click(e)\n\t\t}\n\t}\n\n}\n\nclass $my_lom_button_minor extends $my_lom_button {\n\n\tattr() {\n\t\treturn {\n\t\t\t'$my_lom_button_minor': true,\n\t\t}\n\t}\n\n}\n","class $my_lom_input extends $my_lom_view {\n\n\tdom_name() { return 'input' }\n\n\ttype() { return 'text' }\n\n\t_value = ''\n\tvalue( next = this._value ) {\n\t\treturn this._value = next\n\t}\n\n\tevent_change( e: Event ) {\n\t\tthis.value( (e.target as HTMLInputElement).value )\n\t}\n\n\tfield() {\n\t\treturn {\n\t\t\tvalue: this.value(),\n\t\t}\n\t}\n\n\tattr() {\n\t\treturn {\n\t\t\ttype: this.type(),\n\t\t}\n\t}\n\n\tevent() {\n\t\treturn {\n\t\t\tinput: (e: Event)=> this.event_change(e),\n\t\t}\n\t}\n\n}\n","class $my_lom_storage {\n\n\tstatic value<Value>( key: string, next?: Value ) {\n\t\tif ( next === undefined ) return JSON.parse( localStorage.getItem( key ) ?? 'null' )\n\n\t\tif ( next === null ) localStorage.removeItem( key )\n\t\telse localStorage.setItem( key, JSON.stringify( next ) )\n\n\t\treturn next\n\t}\n\n}\n","setInterval( ()=> {\n\t$my_lom_dom_context.document.documentElement.setAttribute(\n\t\t'my_lom_theme' ,\n\t\tnew Date().getSeconds() < 30 ? 'light' : 'dark' ,\n\t)\n} , 1_000 )\n"]}